# 动漫贴纸制作工具 (Sticker Remover)

这是一个专门为动漫/漫画角色优化的贴纸制作工具。它能够自动去除背景、清理杂点、优化边缘并调整到指定尺寸。

## 🛠 开发背景与历程

本项目经历了以下几个技术迭代阶段：

1.  **基础背景去除**: 采用了 `briaai/RMBG-1.4` 模型。这是目前处理边缘最细腻的模型之一。
2.  **透明度修复**: 在开发过程中，曾遇到角色内部颜色被误判为背景而变透明的问题。我们通过“岛屿过滤逻辑”替代了粗暴的“全填充逻辑”，在保留背景清理能力的同时，确保了角色身体的完整性。
3.  **杂点清理 (Island Removal)**: 动漫图片在背景去除后经常会留下细小的像素碎块（噪点）。我们引入了连通域分析算法，自动识别并删除面积过小的“孤岛”像素。
4.  **边缘光晕修复 (Halo Fixing)**: 针对背景颜色渗入角色边缘的问题，引入了“边缘腐蚀 (Erosion)”技术，将遮罩向内收缩，配合高斯模糊，实现了干净且自然的切割边缘。
5.  **高质量缩放**: 为了满足特定的贴纸尺寸需求 (如 370x320)，集成了 LANCZOS 采样算法，确保放大后的线条依然锐利。

## 📂 核心文件结构

- `main.py`: **主程序入口**。用户在此调整参数并运行。
- `sticker_remover.py`: **核心逻辑类**。封装了 AI 模型加载、OpenCV 图像处理全流程。
- `requirements.txt`: 项目依赖包列表。

## ⚙️ 参数调整指南

在 `main.py` 中，你可以通过以下参数微调效果：

| 参数 | 建议值 | 作用描述 |
| :--- | :--- | :--- |
| `erosion_size` | 1 ~ 3 | **消除边框杂色**。如果边缘残留原图背景色，请调大。 |
| `island_size` | 50 ~ 200 | **清理背景碎点**。如果背景不够干净，请调大。 |
| `target_size` | (370, 320) | **最终输出尺寸**。会自动居中并保持比例，多余部分透明。 |

## 🚀 如何开始

1. 确保安装了依赖：`pip install -r requirements.txt`
2. 将你的图片命名为 `3.jpg` (或在 main.py 中修改路径)。
3. 运行：`python main.py`

---
*本项目已清理所有实验性脚本，目前为最终稳定版。*
